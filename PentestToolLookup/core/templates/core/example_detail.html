{% extends "core/base.html" %}
{% block script %}
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script type="module">
  new Vue({
    el: '#mod-cmd',
    delimiters: ['[[',']]'],
    data: {
      {% for arg in args %}
      arg{{ forloop.counter }}: '{{ arg|safe }}',
      {% endfor %}
    }
  })
</script>

<script>
  function copyToClipboard() {
    let text = document.getElementById("example-code").textContent;
    navigator.clipboard.writeText(text);
  }
</script>
{% endblock %}

{% block content %}
<div class="flex-container example-detail">
  <div class="flex-split left">
    <div class="header-with-arrow">
      <a href="javascript:history.go(-1)"><span class="material-icons">arrow_back_ios</span></a>
      <h1>{{ example.name }}</h1>
    </div>

    <div class="container explainer">
    {{ example.explanation|safe }}
    </div>
    <hr style="margin-top: 1.5rem;"/>
    
    <div id="mod-cmd">
      <h3>Command:</h3>
      {% if args %}
      <div style="display: flex; flex-direction: row;">
        <h4>---Modify Fields---</h4>
      </div>
      {% endif %}
      {% for arg in args %}
      <div class="v-model-container">
        <input v-model="arg{{ forloop.counter }}" placeholder="{{ arg|safe }}" @focus="$event.target.select()"></input>
      </div>
      {% endfor %}
      <h4>---Command to Run---</h4>
      <div class="example-code-container">
        <pre><code id="example-code">{{ modified_cmd }}</code></pre>
      </div>
      <button onclick = "copyToClipboard()">Copy to Clipboard</button>
    </div>
    <hr style="margin-top: 1.5rem;"/>

    <div>
      <p><b>Use Cases:</b>
      <a href="/use-cases/{{ example.use_case }}">{{ example.use_case }}</a>
      </p>
    </div>
    <hr style="margin-top: 1.5rem;"/>

    <div class="tag-container">
      <small><b>tags:</b>
        {% for tag in tags %}
        <a class="tag" href="/search/?q={{ tag }}">{{ tag }}</a>
        {% endfor %}   
      </small>
    </div>
  </div>

  <div class="flex-split right">
    <h2>Tool: <a href="/tools/{{ example.tool_name.tslug }}">{{ example.tool_name.name }}</a></h2>
    
    <div class="container explainer">
      {{ example.tool_name.description|safe }}
    </div>

    <div class="container">
      <h4>Tool Help:</h4>
      <div class="man-div">
        <pre><code>{{ example.tool_name.man }}</code></pre>
      </div>
    </div>

    <div class="container">
      <h4>Tool Resources:</h4>
      <pre class="resources">{{ example.tool_name.resources|urlize }}</pre>
    </div>

  </div>
</div>
{% endblock %}
